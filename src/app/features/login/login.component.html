<div class="login-container">
	<!-- Main login card -->
	<mat-card class="sign-in-card">
  
	  <!-- Heading for the login form -->
	  <div class="heading">
		Sign In
	  </div>
	
	  <mat-card-content class="page-card-content">
		
		<!-- Toggle buttons to switch between Password and OTP login modes -->
		<div class="login-toggle">
		  <button id="password" [class.active]="isPasswordMode" (click)="toggleMode(true)">
			Password-based
		  </button>
		  <button id="otp" [class.active]="!isPasswordMode" (click)="toggleMode(false)">
			OTP-based
		  </button>
		</div>
  
		<!-- Login form -->
		<form [formGroup]="loginForm" (ngSubmit)="onLogin()">
  
		  <!-- Password-based login section -->
		  <ng-container *ngIf="isPasswordMode">
			<!-- Username field -->
			<mat-form-field appearance="outline">
			  <mat-label>Username</mat-label>
			  <input matInput formControlName="username" placeholder="Enter your Username" />
			</mat-form-field>
  
			<!-- Password field with toggle visibility -->
			<mat-form-field appearance="outline">
			  <mat-label>Password</mat-label>
			  <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" placeholder="Enter your password" />
			  <button mat-icon-button matSuffix (click)="togglePasswordVisibility()" type="button">
				<mat-icon>{{ hidePassword ? 'visibility' : 'visibility_off' }}</mat-icon>
			  </button>
			</mat-form-field>
  
			<!-- Custom captcha component -->
			<app-captcha [formGroup]="loginForm"></app-captcha>
  
			<!-- Submit button -->
			<div class="text-center mt-3">
			  <button mat-raised-button type="submit" [disabled]="loginForm.invalid">
				Sign In
			  </button>
			</div>
  
			<!-- Forgot password link -->
			<div class="forgot-password link">
			  <a (click)="resetPhoneNumber()">Forgot Password?</a>
			</div>
		  </ng-container>
  
		  <!-- OTP-based login section -->
		  <ng-container *ngIf="!isPasswordMode">
  
			<!-- Phone number input (shown if OTP not sent yet) -->
			<mat-form-field appearance="outline" *ngIf="!otpSent">
			  <mat-label>Phone Number</mat-label>
			  <input matInput formControlName="username" placeholder="Enter your Phone Number" type="tel" />
			</mat-form-field>
  
			<!-- Send OTP button -->
			<div class="text-center mt-3" *ngIf="!otpSent">
			  <button mat-raised-button type="button" (click)="sendOtp()" [disabled]="loginForm.controls['username'].invalid">
				Send OTP
			  </button>
			</div>
  
			<!-- OTP input and verify section (shown after OTP is sent) -->
			<div *ngIf="otpSent">
			  <!-- OTP input using ng-otp-input -->
			  <ng-otp-input
				[formControl]="otpControl"
				[config]="{ length: 4, inputStyles: { width: '54.4px', height: '50px' } }"
				(onInputChange)="onOtpChange($event)">
			  </ng-otp-input>										
  
			  <!-- Verify OTP button -->
			  <div class="text-center mt-3">
				<button mat-raised-button type="submit" [disabled]="loginForm.controls['otp'].invalid">
				  Verify OTP
				</button>
			  </div>
			</div>
  
			<!-- Use another phone number link -->
			<div class="use-another-number link" *ngIf="otpSent">
			  <a (click)="resetPhoneNumber()">Use another phone number</a>
			</div>
  
		  </ng-container>
		</form>
	  </mat-card-content>
	</mat-card>
  
	<!-- Overlay card with government seal and registration prompt -->
	<mat-card class="overlay">
	  <mat-card-header>
		<img src="assets/images/header/Seal_of_Sikkim_greyscale.png">
	  </mat-card-header>
  
	  <!-- Greeting text and register button -->
	  <mat-card-content>
		<div class="text">
		  <h1>Hello!</h1>
		  <p>Register yourself if you don't have an account.</p>
		</div>
		<button mat-raised-button (click)="goToApplyLicense()">Register</button>
	  </mat-card-content>
  
	  <!-- Help desk info -->
	  <mat-card-footer>
		<h6>HELP DESK</h6>
		03592-203963<br>
		E-mail Id :<br>
		helpdesk-excise&#64;sikkim.gov.in
	  </mat-card-footer>
	</mat-card>
  </div>
  