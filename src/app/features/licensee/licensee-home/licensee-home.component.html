<!-- Main container for the sidenav layout with elevation and minimum height -->
<mat-sidenav-container class="mat-elevation-z8" style="padding: 0; min-height: 800px" *ngIf="loaded">
  
  <!-- Sidebar (sidenav) section -->
  <mat-sidenav #sidenav mode="side" [opened]="false">
    
    <!-- Header section of the sidebar with a close button -->
    <div class="sidenav-header">
      <button mat-icon-button (click)="snavToggle(sidenav)" color="primary">
        <mat-icon style="font-size: 27px">close</mat-icon>
      </button>
    </div>

    <!-- Content inside the sidebar -->
    <div class="sidebar-content">
      
      <!-- User profile section -->
      <div class="profile">
        <div class="username">
          {{userName}} <!-- Displays the user's name -->
        </div>

        <!-- Button to view the user's profile -->
        <button mat-mini-fab class="view-profile" (click)="viewProfile()" type="button">
          <mat-icon>account_circle</mat-icon>
        </button>
      </div>

      <!-- Divider line below the profile section -->
      <mat-divider class="profile-divider"></mat-divider>

      <!-- Navigation links -->
      <mat-nav-list *ngIf="accountService.hasAnyRole(['licensee'])">

        <!-- Dashboard link -->
        <mat-list-item routerLink="dashboard" routerLinkActive="active-link">
          <span class="nav-header-cus">Dashboard</span>
        </mat-list-item>

        <!-- Apply License link -->
        <mat-list-item routerLink="apply-license" routerLinkActive="active-link">
          <span class="nav-header-cus">Apply For License</span>
        </mat-list-item>

        <!-- Accordion Menu for Company Registration -->
        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              Company Registration
            </mat-expansion-panel-header>
            <div class="button-column">
              <button mat-menu-item routerLink="company/prepare-application" routerLinkActive="active-link">Prepare Application</button>
              <button mat-menu-item routerLink="company/application-action" routerLinkActive="active-link">Act On Application</button>
              <button mat-menu-item routerLink="company/print-certificate" routerLinkActive="active-link">Print Certificate</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <!-- Accordion Menu for Salesman/Barman Registration -->
        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              Salesman/Barman Registration
            </mat-expansion-panel-header>
            <div class="button-column">
              <button mat-menu-item routerLink="salesman-barman/prepare-application" routerLinkActive="active-link">Prepare Application</button>
              <button mat-menu-item routerLink="salesman-barman/application-action" routerLinkActive="active-link">Act On Draft Application</button>
              <button mat-menu-item routerLink="salesman-barman/print-certificate" routerLinkActive="active-link">Print Certificate</button>
              <button mat-menu-item routerLink="salesman-barman/application-status" routerLinkActive="active-link">Application Status</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-nav-list>
    </div>
  </mat-sidenav>

  <!-- Main content section -->
  <mat-sidenav-content>
    
    <!-- Toggle button to open the sidenav when it's closed -->
    <div class="toggle-btn">
      <button mat-icon-button [class.hidden]="isSidenavOpen" (click)="snavToggle(sidenav)" color="primary">
        <mat-icon style="font-size: 27px">menu</mat-icon>
      </button>
    </div>

    <!-- Router outlet to display routed components -->
    <router-outlet></router-outlet>
    
  </mat-sidenav-content>
</mat-sidenav-container>
