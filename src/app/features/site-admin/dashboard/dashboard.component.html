<!-- Dashboard Container: This contains the entire dashboard layout -->
<div class="dashboard-container">

  <ng-container *ngIf="accountService.hasAnyRole(['commissioner'])">
    <h1>Commissioner Dashboard</h1>
  </ng-container>

  <ng-container *ngIf="accountService.hasAnyRole(['joint_commissioner'])">
    <h1>Joint Commissioner Dashboard</h1>
  </ng-container>
 
    <!-- Dashboard for Permit Section -->
    <ng-container *ngIf="accountService.hasAnyRole(['permit_section'])">
      <!-- Stats Container: This section displays the applied, approved, and pending stats -->
      <div class="stats-container">
        <mat-card class="stat-card applied" (click)="showTable('applied')">
          <div class="circle-icon blue-bg">
            <img src="assets/images/admin/dashboard/applied.png" alt="Applied Icon">
          </div>
          <div class="value">3,474</div>
          <div class="label">Applied</div>
        </mat-card>
      
        <mat-card class="stat-card approved" (click)="showTable('approved')">
          <div class="circle-icon purple-bg">
            <img src="assets/images/admin/dashboard/approved.png" alt="Approved Icon">
          </div>
          <div class="value">14</div>
          <div class="label">Approved</div>
        </mat-card>
      
        <mat-card class="stat-card pending" (click)="showTable('pending')">
          <div class="circle-icon yellow-bg">
            <img src="assets/images/admin/dashboard/pending.png" alt="Pending Icon">
          </div>
          <div class="value">196</div>
          <div class="label">Pending</div>
        </mat-card>
      </div>        
  
      <!-- Table Container: This section contains the table for detailed stats -->
      <mat-card *ngIf="activeTable === 'stats'">
        <mat-card-header>
          Statistics
        </mat-card-header>
        <mat-card-content>
          <!-- Table: Displays detailed information in a table format -->
          <mat-table [dataSource]="statsDataSource">
    
            <!-- Column Definition for Serial Number (Sl No) -->
            <ng-container matColumnDef="slNo">
              <mat-header-cell *matHeaderCellDef> Sl No. </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.slNo}} </mat-cell>
            </ng-container>
          
            <!-- Column Definition for Service Name -->
            <ng-container matColumnDef="serviceName">
              <mat-header-cell *matHeaderCellDef> Service Name </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.serviceName}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Applied Status -->
            <ng-container matColumnDef="applied">
              <mat-header-cell *matHeaderCellDef> Applied </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.applied}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Rejected Status -->
            <ng-container matColumnDef="rejected">
              <mat-header-cell *matHeaderCellDef> Rejected </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.rejected}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Approved Status -->
            <ng-container matColumnDef="approved">
              <mat-header-cell *matHeaderCellDef> Approved </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.approved}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Executed Status -->
            <ng-container matColumnDef="executed">
              <mat-header-cell *matHeaderCellDef> Executed </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.executed}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Pending Status -->
            <ng-container matColumnDef="pending">
              <mat-header-cell *matHeaderCellDef> Pending </mat-header-cell>
              <mat-cell *matCellDef="let stats"> {{stats.pending}} </mat-cell>
            </ng-container>
          
            <!-- Header Row for the table -->
            <mat-header-row *matHeaderRowDef="statsColumns"></mat-header-row>
            <!-- Data Row for the table -->
            <mat-row *matRowDef="let row; columns: statsColumns;"></mat-row>
          </mat-table>

          <!-- Applied table -->

        </mat-card-content>
      </mat-card>

      <mat-card *ngIf="activeTable === 'applied'">
        <button mat-icon-button (click)="goBackToStats()">
          <mat-icon>arrow_back</mat-icon>
        </button>
        <mat-card-header>
          Applied
        </mat-card-header>
        <mat-card-content>
          <mat-table [dataSource]="appliedDataSource">
    
            <!-- Column Definition for Application Id -->
            <ng-container matColumnDef="applicationId">
              <mat-header-cell *matHeaderCellDef> Application Id </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.applicationId}} </mat-cell>
            </ng-container>
          
            <!-- Column Definition for Service Name -->
            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.status}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Applied Status -->
            <ng-container matColumnDef="remarks">
              <mat-header-cell *matHeaderCellDef> Remarks </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.remarks}} </mat-cell>
            </ng-container>

            <!-- Column: Action Buttons (Edit & Delete) -->
            <ng-container matColumnDef="actions">
              <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
              <mat-cell *matCellDef="let element">

                <button mat-icon-button (click)="onView(element)">
                  <mat-icon style="color: #1976d2;">visibility</mat-icon>
                </button>

              </mat-cell>
            </ng-container>
          
            <!-- Header Row for the table -->
            <mat-header-row *matHeaderRowDef="appliedColumns"></mat-header-row>
            <!-- Data Row for the table -->
            <mat-row *matRowDef="let row; columns: appliedColumns;"></mat-row>
          </mat-table>
        </mat-card-content>
      </mat-card>

      <mat-card *ngIf="activeTable === 'approved'">
        <button mat-icon-button (click)="goBackToStats()">
          <mat-icon>arrow_back</mat-icon>
        </button>
        <mat-card-header>
          Approved
        </mat-card-header>
        <mat-card-content>
          <mat-table [dataSource]="approvedDataSource">
    
            <!-- Column Definition for Application Id -->
            <ng-container matColumnDef="applicationId">
              <mat-header-cell *matHeaderCellDef> Application Id </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.applicationId}} </mat-cell>
            </ng-container>
          
            <!-- Column Definition for Service Name -->
            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.status}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Applied Status -->
            <ng-container matColumnDef="remarks">
              <mat-header-cell *matHeaderCellDef> Remarks </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.remarks}} </mat-cell>
            </ng-container>
          
            <!-- Header Row for the table -->
            <mat-header-row *matHeaderRowDef="approvedColumns"></mat-header-row>
            <!-- Data Row for the table -->
            <mat-row *matRowDef="let row; columns: approvedColumns;"></mat-row>
          </mat-table>
        </mat-card-content>
      </mat-card>

      <mat-card *ngIf="activeTable === 'pending'">
        <button mat-icon-button (click)="goBackToStats()">
          <mat-icon>arrow_back</mat-icon>
        </button>
        <mat-card-header>
          Pending
        </mat-card-header>
        <mat-card-content>
          <mat-table [dataSource]="pendingDataSource">
    
            <!-- Column Definition for Application Id -->
            <ng-container matColumnDef="applicationId">
              <mat-header-cell *matHeaderCellDef> Application Id </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.applicationId}} </mat-cell>
            </ng-container>
          
            <!-- Column Definition for Service Name -->
            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.status}} </mat-cell>
            </ng-container>
    
            <!-- Column Definition for Applied Status -->
            <ng-container matColumnDef="remarks">
              <mat-header-cell *matHeaderCellDef> Remarks </mat-header-cell>
              <mat-cell *matCellDef="let applied"> {{applied.remarks}} </mat-cell>
            </ng-container>
          
            <!-- Header Row for the table -->
            <mat-header-row *matHeaderRowDef="pendingColumns"></mat-header-row>
            <!-- Data Row for the table -->
            <mat-row *matRowDef="let row; columns: pendingColumns;"></mat-row>
          </mat-table>
        </mat-card-content>
      </mat-card>
    </ng-container>
</div>
