<div class="container-fluid">
  <mat-card>
    <mat-card-header class="page-card-header">
      <div class="heading">
        Add User
      </div>
    </mat-card-header>
    <mat-card-content class="page-card-content">
      <!-- User form starts here -->
      <form #newUserForm="ngForm" (ngSubmit)="submit()">
        
        <!-- First Name, Middle Name, Last Name Fields -->
        <div class="row mb-3">
          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- First Name Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>First Name</mat-label>
              <input matInput [(ngModel)]="user.firstName" name="firstName" placeholder="Enter First Name" required />
            </mat-form-field>
          </div>

          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Middle Name Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Middle Name</mat-label>
              <input matInput [(ngModel)]="user.middleName" name="middleName" placeholder="Enter Middle Name" />
            </mat-form-field>
          </div>

          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Last Name Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Last Name</mat-label>
              <input matInput [(ngModel)]="user.lastName" name="lastName" placeholder="Enter Last Name" required />
            </mat-form-field>
          </div>
        </div>

        <!-- Email, Phone Number, District Fields -->
        <div class="row mb-3">
          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Email Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Email</mat-label>
              <input matInput [(ngModel)]="user.email" name="email" placeholder="Enter Email" type="email" required />
            </mat-form-field>
          </div>

          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Phone Number Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Phone Number</mat-label>
              <input matInput [(ngModel)]="user.phoneNumber" name="phonenumber" placeholder="Enter Phone Number" required pattern="^\d{10}$" />
            </mat-form-field>
          </div>

          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- District Dropdown -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>District</mat-label>
              <mat-select matInput placeholder="Enter District" [(ngModel)]="user.district" name="district" required>
                <mat-option *ngFor="let district of districts" [value]="district.DistrictCode" (click)="onDistrictChange(district.DistrictCode)">
                  {{ district.District }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <!-- Subdivision, Password, Confirm Password Fields -->
        <div class="row mb-3">
          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Subdivision Dropdown -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Subdivision</mat-label>
              <mat-select matInput placeholder="Enter Subdivision" [(ngModel)]="user.subDivision" name="subdivision" required>
                <mat-option *ngFor="let subDivision of filteredSubdivisions" [value]="subDivision.SubDivisionCode">
                  {{ subDivision.SubDivisionName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Password Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Password</mat-label>
              <input matInput type="password" [(ngModel)]="user.password" name="password" placeholder="Enter Password" required minlength="8" />
            </mat-form-field>
          </div>

          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Confirm Password Input -->
            <mat-form-field class="my-form-full-width" appearance="outline">
              <mat-label>Confirm Password</mat-label>
              <input matInput type="password" [(ngModel)]="user.confirmPassword" name="confirmPassword" placeholder="Confirm Password" required />
            </mat-form-field>
          </div>
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="row mb-3">
          <div class="col-xl-4 col-lg-4 col-md-4">
            <!-- Submit Button -->
            <button mat-raised-button color="primary" type="submit" [disabled]="newUserForm.invalid">Submit</button>
            <!-- Cancel Button -->
            <button mat-raised-button color="warn" type="button" (click)="cancel()">Cancel</button>
          </div>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
